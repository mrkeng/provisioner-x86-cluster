- name: Ensure log directories exist
  action: file state=directory owner=adjutant group=devops mode=0770 path=/var/log/swarm/{{ item }}
  with_items:
    - swarm
    - swarm/node.js

- name: Ensure directory /srv/api exists
  action: file state=directory owner=adjutant group=devops mode=0750 path=/srv/api

- name: Install API's dependencies
  action: apt pkg={{ item }} state=latest
  with_items:
    - graphicsmagick
    - libfreetype6
    - libfreetype6-dev
    - libgraphicsmagick1-dev
    - libjpeg-dev
    - libmemcached-dev
    - libssl-dev
    - libxml2-dev
    - libxslt1-dev
    - zlib1g-dev
